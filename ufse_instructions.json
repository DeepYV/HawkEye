{
  "module": "User Frustration Signal Engine (UFSE)",
  "version": "1.0",
  "instructions": {
    "role": {
      "title": "Your Role",
      "description": "You are building ONE isolated backend module named: User Frustration Signal Engine (UFSE)",
      "type": "Pure logic module",
      "unknowns": [
        "UI",
        "AI",
        "Jira",
        "Linear",
        "SDK internals"
      ],
      "knowns": [
        "Sessions",
        "Events"
      ]
    },
    "singleResponsibility": {
      "title": "Single Responsibility (Do Not Expand)",
      "responsibility": "Convert a completed user session into zero or more high-confidence frustration incidents, while minimizing false positives.",
      "rule": "If confidence is insufficient → emit nothing.",
      "doNotBuild": [
        "AI or LLM usage",
        "Ticket creation",
        "Dashboards",
        "Replay logic",
        "Error monitoring replacement",
        "User feedback handling"
      ]
    },
    "input": {
      "title": "What This Module Receives (Strict)",
      "type": "Completed session object",
      "includes": [
        "Ordered list of normalized events",
        "Session metadata (route, device, app version)"
      ],
      "eventTypes": [
        "User interactions",
        "System feedback (errors, latency)",
        "Navigation"
      ],
      "mustNever": [
        "Assume business meaning",
        "Inspect raw DOM or PII"
      ]
    },
    "output": {
      "title": "What This Module Outputs",
      "type": "Frustration Incident (structured object) OR nothing",
      "requiredFields": [
        "Incident ID",
        "Session ID",
        "Frustration score (0–100)",
        "Confidence level (Low / Medium / High)",
        "Triggering signals",
        "Primary failure point",
        "Timestamp",
        "Human-readable explanation"
      ],
      "mustNotInclude": [
        "Recommendations",
        "AI language",
        "Opinions"
      ]
    },
    "sessionIsolation": {
      "title": "Session Isolation Rules (Critical)",
      "rules": [
        "Events from different sessions must NEVER interact",
        "Signals must occur within the same session",
        "Signals must occur within a bounded time window",
        "Session boundaries are trusted and final"
      ],
      "violation": "Violation of this rule = invalid implementation",
      "timeWindow": {
        "default": "30 seconds",
        "description": "Signals must occur within this window to be considered correlated",
        "behavior": "Time window starts from first signal detection. All correlated signals must complete within the window. If time window expires before correlation completes → no incident emitted."
      }
    },
    "frustrationSignals": {
      "title": "Allowed Frustration Signals (Only These)",
      "signals": [
        {
          "name": "Rage Interaction Signal",
          "triggerConditions": [
            "Same interaction target",
            "Repeated rapidly",
            "No success feedback in between"
          ],
          "exclusions": [
            "Single repetition ≠ rage"
          ]
        },
        {
          "name": "Blocked Progress Signal",
          "triggerConditions": [
            "User attempts a meaningful action",
            "System rejects (error or validation)",
            "User retries same action"
          ],
          "exclusions": [
            "Ignore first failure"
          ]
        },
        {
          "name": "Abandonment Signal",
          "triggerConditions": [
            "User begins a flow",
            "Encounters friction (error, delay)",
            "Leaves before completion"
          ],
          "exclusions": [
            "Leaving alone is NOT frustration"
          ]
        },
        {
          "name": "Confusion Signal",
          "triggerConditions": [
            "Back-and-forth navigation",
            "Excessive scrolling or hovering",
            "No forward progress"
          ],
          "exclusions": [
            "Confusion alone is LOW severity"
          ]
        }
      ]
    },
    "correlationRules": {
      "title": "Correlation Rules (False Alarm Prevention)",
      "emissionRequirement": "You MUST NOT emit an incident unless ALL are true:",
      "requiredConditions": [
        "At least two independent signals",
        "At least one system feedback signal",
        "Signals occurred within the same session",
        "Signals occurred within the time window"
      ],
      "examples": {
        "valid": [
          "Rage clicks + API error → ✅",
          "Abandonment + validation error → ✅"
        ],
        "invalid": [
          "Single error → ❌",
          "Slow page load only → ❌"
        ]
      }
    },
    "scoringConfidence": {
      "title": "Scoring & Confidence Rules",
      "computations": [
        "Frustration score (0–100)",
        "Confidence level"
      ],
      "emissionRules": [
        "Only High confidence incidents are emitted",
        "Medium / Low confidence are discarded or stored internally"
      ],
      "constraint": "No ML. Deterministic logic only."
    },
    "explainability": {
      "title": "Explainability Requirement (Mandatory)",
      "requirement": "Every emitted incident MUST clearly explain:",
      "explanation": "Which signals occurred and why this crossed the threshold.",
      "rule": "If explanation is unclear → discard incident."
    },
    "configuration": {
      "title": "Configuration Rules",
      "defaultBehavior": "Default behavior must work without configuration",
      "optionalOverrides": [
        "Ignore routes",
        "Adjust thresholds",
        "Suppress admin/internal paths"
      ],
      "rule": "Configuration is OPTIONAL, never required."
    },
    "acceptanceCriteria": {
      "title": "Acceptance Criteria (Must Pass)",
      "criteria": [
        "No single event causes escalation",
        "False positives are <5% in test data",
        "Every incident is explainable",
        "Works out-of-the-box",
        "Emits nothing when uncertain"
      ]
    },
    "designPhilosophy": {
      "title": "Design Philosophy (Follow Exactly)",
      "principles": [
        "Conservative > aggressive",
        "Silence > noise",
        "Explainable > clever",
        "Trust > coverage"
      ],
      "note": "This module determines whether the product is trusted or ignored."
    },
    "finalNote": {
      "title": "FINAL NOTE FOR CURSOR",
      "rule": "If a feature:",
      "exclusions": [
        "Is not explicitly described",
        "Increases cleverness",
        "Reduces explainability",
        "Adds assumptions"
      ],
      "action": "DO NOT IMPLEMENT IT."
    }
  },
  "improvements": {
    "addedClarity": [
      "Explicit signal definitions with trigger conditions",
      "Clear examples of valid vs invalid incidents",
      "Structured output format specification",
      "Time window constraints for signal correlation"
    ],
    "enhancedRules": [
      "Added bounded time window requirement to correlation",
      "Clarified that system feedback signal is mandatory",
      "Explicit exclusion of single-event escalations"
    ]
  }
}