{
  "highLevelArchitecture": {
    "name": "End-to-End Architecture Flow",
    "description": "Complete system flow from customer app to ticket generation",
    "flow": [
      {
        "component": "Customer App",
        "type": "Application",
        "technologies": ["React", "Next.js"],
        "position": 1,
        "description": "Customer application where users interact"
      },
      {
        "component": "Frontend Observer SDK",
        "type": "SDK",
        "technologies": ["TypeScript"],
        "position": 2,
        "description": "Lightweight SDK that observes user interactions",
        "characteristics": ["<10KB gzipped", "Browser-only", "No dependencies"]
      },
      {
        "component": "Event Ingestion API",
        "type": "API",
        "technologies": ["Go", "HTTP", "JSON"],
        "position": 3,
        "description": "Receives and validates events from SDK",
        "protocol": "HTTP (batched)",
        "format": "JSON"
      },
      {
        "component": "Session Manager",
        "type": "Service",
        "technologies": ["Go"],
        "position": 4,
        "description": "Manages user sessions and aggregates events",
        "responsibilities": [
          "Session tracking",
          "Event aggregation",
          "Time-window management"
        ]
      },
      {
        "component": "Frustration Signal Engine (UFSE)",
        "type": "Engine",
        "technologies": ["Go"],
        "position": 5,
        "description": "Core engine that detects frustration signals",
        "pattern": "Stream → Window → Evaluate → Emit",
        "characteristics": [
          "Deterministic rule engine",
          "Time-window evaluation",
          "In-process Go workers"
        ]
      },
      {
        "component": "Incident Store",
        "type": "Storage",
        "technologies": ["PostgreSQL", "ClickHouse"],
        "position": 6,
        "description": "Stores detected incidents and related data",
        "storage": {
          "metadata": "PostgreSQL",
          "events": "ClickHouse"
        },
        "downstream": [
          "AI Interpretation Module",
          "Ticket Generator"
        ]
      },
      {
        "component": "AI Interpretation Module",
        "type": "Module",
        "technologies": ["OpenAI", "Anthropic"],
        "position": 7,
        "description": "Interprets incidents using AI (async, post-incident)",
        "stage": "Later",
        "characteristics": [
          "Async processing",
          "Post-incident only",
          "Never in hot path"
        ],
        "parent": "Incident Store"
      },
      {
        "component": "Ticket Generator",
        "type": "Integration",
        "technologies": ["REST API", "Webhook"],
        "position": 8,
        "description": "Generates tickets in external systems",
        "targets": ["Jira", "Linear"],
        "priority": "Linear first",
        "parent": "Incident Store"
      }
    ],
    "dataFlow": {
      "direction": "unidirectional",
      "stages": [
        {
          "stage": 1,
          "from": "Customer App",
          "to": "Frontend Observer SDK",
          "data": "User interactions, events"
        },
        {
          "stage": 2,
          "from": "Frontend Observer SDK",
          "to": "Event Ingestion API",
          "data": "Batched events (JSON)"
        },
        {
          "stage": 3,
          "from": "Event Ingestion API",
          "to": "Session Manager",
          "data": "Validated events"
        },
        {
          "stage": 4,
          "from": "Session Manager",
          "to": "Frustration Signal Engine",
          "data": "Session context, aggregated events"
        },
        {
          "stage": 5,
          "from": "Frustration Signal Engine",
          "to": "Incident Store",
          "data": "Detected incidents, signals"
        },
        {
          "stage": 6,
          "from": "Incident Store",
          "to": "AI Interpretation Module",
          "data": "Incident data (async)"
        },
        {
          "stage": 7,
          "from": "Incident Store",
          "to": "Ticket Generator",
          "data": "Incident data, metadata"
        }
      ]
    },
    "keyPrinciples": [
      "Unidirectional data flow",
      "Deterministic core path",
      "AI processing is async and out of hot path",
      "Separation of concerns at each stage"
    ]
  }
}